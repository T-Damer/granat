import { useLingui } from '@lingui/react/macro'

export type QuestionaryResult = {
  title: string
  description: string
  docDescription: string
  treatment: string
  sum: number
}

function getCinTactic(cinGrade: number | null, t: (str: TemplateStringsArray) => string) {
  switch (cinGrade) {
    case 0:
      return t`При ЦИН 1 (LSIL) на фоне инфицирования высокоонкогенными штаммами ВПЧ рекомендован курс вагинальных суппозиториев с дииндолилметаном (Цервикон ДИМ) в течение 3 месяцев с последующим скринингом через 6 месяцев.`
    case 1:
      return t`При ЦИН 2 (HSIL) показано комплексное консервативное (Цервикон ДИМ) и хирургическое лечение (конизация или эксцизия шейки матки) с тщательной гистологией и скринингом через 6 месяцев.`
    case 2:
      return t`При ЦИН 3 (HSIL) необходимо обязательное направление к онкогинекологу для дообследования и специализированного лечения.`
    default:
      return t`Тактика по ЦИН определяется после уточнения степени по ПАП-тесту.`
  }
}

export default function useResult(sum: number, cinGrade: number | null) {
  const { t } = useLingui()
  const cinTactic = getCinTactic(cinGrade, t)

  switch (true) {
    case sum < 10:
      return {
        title: t`Низкая степень риска развития ЦИН и РШМ`,
        description: t`У вас низкий риск развития цервикальной интраэпителиальной неоплазии и рака шейки матки. Рекомендуется регулярный скрининг не реже 1 раза в год и наблюдение у гинеколога.`,
        docDescription: t`Сумма 0-9 баллов соответствует низкой степени риска. Показаны плановые скрининговые обследования (цитология, ВПЧ-тестирование по показаниям) и динамическое наблюдение.`,
        treatment: `${t`При низкой степени риска и выявлении вирусных инфекций скрининг должен проводиться не менее 1 раза в год. Лечение может включать местную противовирусную терапию по национальным протоколам и коррекцию фоновых процессов шейки матки.`}\n\n${cinTactic}`,
        sum,
      }
    case sum >= 10 && sum < 19:
      return {
        title: t`Средняя степень риска развития ЦИН и РШМ`,
        description: t`У вас средний риск развития цервикальной неоплазии и рака шейки матки. Не откладывайте расширенное обследование у специалиста и контрольные исследования в ближайшие месяцы.`,
        docDescription: t`Сумма 10-18 баллов соответствует средней степени риска. Требуется полноценное комплексное обследование: ВПЧ-тестирование, цитологическое исследование, кольпоскопия, гистологический анализ, иммуноморфологические исследования, онкомаркеры и визуализирующие методы (КТ/МРТ) по показаниям.`,
        treatment: `${t`При среднем риске рекомендуется полноценное комплексное обследование: ВПЧ-тестирование, цитологическое исследование, кольпоскопия, гистологический анализ, иммуноморфологические исследования, онкомаркеры и визуализирующие методы (КТ/МРТ) по показаниям.`}\n\n${cinTactic}`,
        sum,
      }
    case sum > 18:
      return {
        title: t`Высокая степень риска развития ЦИН и РШМ`,
        description: t`У вас высокий риск развития предраковых изменений и рака шейки матки. Нужна приоритетная консультация гинеколога/онкогинеколога и расширенная диагностика без задержек.`,
        docDescription: t`Сумма 19-28 баллов соответствует высокой степени риска. Пациентка относится к группе активного диспансерного наблюдения с маршрутизацией к онкогинекологу и проведением углубленной диагностики.`,
        treatment: `${t`Рекомендуется полный комплекс обследования (ВПЧ-тест, цитология, кольпоскопия, гистология, иммуноморфология, онкомаркеры, КТ/МРТ по показаниям).`}\n\n${cinTactic}`,
        sum,
      }
    default:
      return {
        title: t`Низкая степень риска развития ЦИН и РШМ`,
        description: t`У вас низкий риск развития цервикальной интраэпителиальной неоплазии и рака шейки матки. Рекомендуется регулярный скрининг не реже 1 раза в год и наблюдение у гинеколога.`,
        docDescription: t`Сумма 0-9 баллов соответствует низкой степени риска. Показаны плановые скрининговые обследования (цитология, ВПЧ-тестирование по показаниям) и динамическое наблюдение.`,
        treatment: `${t`При низкой степени риска и выявлении вирусных инфекций скрининг должен проводиться не менее 1 раза в год. Лечение может включать местную противовирусную терапию по национальным протоколам и коррекцию фоновых процессов шейки матки.`}\n\n${cinTactic}`,
        sum,
      }
  }
}
